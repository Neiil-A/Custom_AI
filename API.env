import streamlit as st
from streamlit_auth0 import login_button
from dotenv import load_dotenv
import os

# Load environment variables from .env file
load_dotenv()

# Configuration for Auth0
auth0_config = {
    'client_id': os.getenv('GITHUB_CLIENT_ID'),
    'client_secret': os.getenv('GITHUB_CLIENT_SECRET'),
    'domain': os.getenv('GITHUB_AUTH0_DOMAIN'),
    'redirect_uri': os.getenv('GITHUB_CALLBACK_URL')
}

# Render the login button
login_info = login_button(auth0_config)

# Display user information if logged in
if login_info:
    st.write(f"Welcome {login_info['name']}!")
else:
    st.write("Please log in using your GitHub account.")

